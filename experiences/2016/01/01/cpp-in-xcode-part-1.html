<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width initial-scale=1"> <meta name="author" content="ikiApps LLC, 粋アプリ, d108(सोऽहम्)"> <meta name="description" content="C++ was the programming language in which I first learned object-oriented programming. I’m now going back to it for integrating it with Objective-C and Swift..."> <title>C++ and Swift in Xcode Part 1</title> <link href="/assets/themes/bootstrap/resources/bootstrap/css/bootstrap.min.css" rel="stylesheet"> <!--[if lt IE 9]> <script src="/assets/themes/bootstrap/resources/respond/Respond.min.js"></script> <![endif]--> <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed"> <link href="/rss.xml" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed"> <link rel="stylesheet" href="/css/main.css" type="text/css"> <link rel="canonical" href="/experiences/2016/01/01/cpp-in-xcode-part-1"> <link rel="shortcut icon" href="/favicon.ico"> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-40712418-2', 'auto'); ga('send', 'pageview'); </script> <script src="/js/jquery-3.2.0.min.js"></script> </head> <body> <nav class="navbar navbar-default" role="navigation"> <div class="container"> <div class="navbar-header"> <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <div class="navbar-image"><a href="/"><img src="/assets/themes/bootstrap/iki-circle-logo.png" width="40"/></a></div> <a class="navbar-brand" href="/">ikiApps</a> </div> <div class="collapse navbar-collapse navbar-ex1-collapse"> <ul class="nav navbar-nav"> <li><a href="/blog/">Blog</a></li> <li><a href="/archive">Archive</a></li> <li><a href="/tags">Tags</a></li> <li><a href="/search/">Search</a></li> </ul> </div> </div> </nav> <div class="container"> <div class="page-header"> <h1>C++ and Swift in Xcode Part 1 </h1> </div> <div class="row post-full"> <div class="col-md-12"> <div class="date"> <span>01 January 2016</span> </div> <div class="content"> <p>C++ was the programming language in which I first learned object-oriented programming. I’m now going back to it for integrating it with Objective-C and Swift in Xcode. I’ve always found that building software in other languages can enhance my understanding of programming in a way that goes beyond even advanced study of a single language.</p> <p>In a series of posts, I’m going to describe my experiences in picking up the language and integrating it with the current version of Swift. I’m going to present this material as a series of loosely organized questions.</p> <p>When I see Objective-C or Swift they appear as being mostly the same to me. I can readily translate between the two. <strong>This is the level that I want to get to with C++.</strong></p> <h2 id="how-do-you-use-c-in-xcode-with-swift">How do you use C++ in Xcode with Swift?</h2> <p>Xcode has built-in support for C++. Support for C++ under LLVM, the default compiler in Xcode, is detailed in <a href="[http://clang.llvm.org/cxx\_status.html](http://clang.llvm.org/cxx_status.html)">C++ Support in Clang</a>. For reference, the compiler in Xcode can be set under <strong>Build Settings &gt; Build Options &gt; Compiler for C/C++/Objective-C.</strong> You may also notice in the build settings that C++ support is currently set for C++11 by default. As an aside, much of the Swift language is currently written in C++.</p> <h2 id="how-do-you-define-a-function-in-c">How do you define a function in C++?</h2> <p>Function definitions are somewhere between Objective-C and Swift. The return type is presented on the left and the arguments are listed within parentheses.</p> <figure class="highlight"><pre><code class="language-c--" data-lang="c++"><span></span><span class="kt">void</span> <span class="nf">printHelloWorld</span><span class="p">()</span>
<span class="p">{</span>
    <span class="c1">// C++ function code goes here.</span>
<span class="p">}</span></code></pre></figure> <p>Functions are called much the same as in Swift using parentheses after the function’s name to contain function parameter names and arguments.</p> <p>C++ is like Objective-C in that functions will not be available publicly unless exposed in a header file. Swift is different in that function scope is <code>public</code> unless set differently using function modifiers like <code>private</code>.</p> <p>Also, C++ still uses semicolons to terminate lines like Objective-C!</p> <h2 id="how-do-you-define-a-class-in-c">How do you define a class in C++?</h2> <p>Classes are declared in a header file using syntax similar to Swift.</p> <p>Classes in C++ need a trailing semicolon.</p> <p>C++ objects are created using constructors! These are comparable to Swift inits. Constructors can go in the header for a class.</p> <figure class="highlight"><pre><code class="language-c--" data-lang="c++"><span></span><span class="k">class</span> <span class="nc">MyClass</span>
<span class="p">{</span>
    <span class="k">public</span><span class="o">:</span>
    <span class="n">MyClass</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// C++ constructor code.</span>
    <span class="p">}</span>
    <span class="c1">// Function declarations:</span>
    <span class="kt">void</span> <span class="n">someFunction</span><span class="p">();</span>
    <span class="kt">int</span> <span class="nf">anotherFunction</span><span class="p">();</span>
<span class="p">};</span></code></pre></figure> <h2 id="how-can-a-function-in-a-c-class-be-called-in-swift">How can a function in a C++ class be called in Swift?</h2> <p><strong>C++ functions cannot be accessed directly from Swift.</strong></p> <p>Instead, the C++ functions can be accessed from Objective-C++. An Objective-C++ file is indicated by a file with a .mm extension.</p> <p>Swift can then call the functions defined in Objective-C++ that are exposed through a bridging header.</p> <p>Here is a Hello World function defined by two separate files in C++.</p> <p>Filename: <code>SomeCPPHeader.hpp</code></p> <figure class="highlight"><pre><code class="language-c--" data-lang="c++"><span></span><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>

<span class="k">class</span> <span class="nc">CPPClass</span>
<span class="p">{</span>
    <span class="k">public</span><span class="o">:</span>
    <span class="n">CPPClass</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;This is the constructor.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kt">void</span> <span class="n">printHelloWorld</span><span class="p">();</span>
<span class="p">};</span></code></pre></figure> <p>Filename: <code>SomeCPPImplementation.cpp</code></p> <figure class="highlight"><pre><code class="language-c--" data-lang="c++"><span></span><span class="cp">#include</span> <span class="cpf">&quot;SomeCPPHeader.hpp&quot;</span><span class="cp"></span>

<span class="kt">void</span> <span class="n">CPPClass</span><span class="o">::</span><span class="n">printHelloWorld</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Hello World.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure> <p>Once the C++ code is in place, it is a matter of connecting the C++ functions to Objective-C++ functions.</p> <p>Filename: <code>MyOCPPHeader.h</code></p> <figure class="highlight"><pre><code class="language-objective-c--" data-lang="objective-c++"><span></span><span class="cp">#import &lt;Foundation/Foundation.h&gt;</span>

<span class="k">@interface</span> <span class="nc">MyOCPPClass</span>: <span class="bp">NSObject</span>

<span class="p">-(</span><span class="kt">void</span><span class="p">)</span><span class="nf">printHelloWorldFromCPP</span><span class="p">;</span>

<span class="k">@end</span></code></pre></figure> <p>Filename: <code>MyOCPPClass.mm</code></p> <figure class="highlight"><pre><code class="language-objective-c--" data-lang="objective-c++"><span></span><span class="cp">#import &quot;MyOCPPHeader.h&quot;</span>
<span class="cp">#include</span> <span class="cpf">&quot;SomeCPPHeader.hpp&quot;</span><span class="cp"></span>

<span class="k">@implementation</span> <span class="nc">MyOCPPClass</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">printHelloWorldFromCPP</span>
<span class="p">{</span>
    <span class="n">CPPClass</span> <span class="n">helloPrinter</span><span class="p">;</span>
    <span class="n">helloPrinter</span><span class="p">.</span><span class="n">printHelloWorld</span><span class="p">();</span>
<span class="p">}</span>

<span class="k">@end</span></code></pre></figure> <p>The Objective-C++ functions can then be exposed to Swift by way of a bridging header. In the bridging header, the header for the Objective-C++ code is imported. For this example, the bridging header would contain the following code.</p> <p>Filename: <code>My-Bridging-Header.h</code></p> <figure class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span></span><span class="cp">#import &quot;MyOCPPHeader.h&quot;</span></code></pre></figure> <p>Finally, the C++ code can be run from Swift by calling the connected Objective-C++ code. The following code illustrates this where the connected C++ function <code>CPPClass::printHelloWorld()</code> is called by way of the Objective-C++ function <code>printHelloWorldFromCPP</code>.</p> <p>Filename: <code>SomeSwiftFile.swift</code></p> <figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span></span><span class="kd">let</span> <span class="nv">OCPPObject</span> <span class="p">=</span> <span class="n">MyOCPPClass</span><span class="p">()</span>
<span class="n">OCPPObject</span><span class="p">.</span><span class="n">printHelloFromCPP</span><span class="p">()</span></code></pre></figure> <p>That concludes my initial foray into integrating C++ with Swift. I’ve outlined how to start using C++ classes and functions and how to call a C++ function from Swift through the use of an intermediate Objective-C++ function.</p> </div> <ul class="tag_box inline"> <li><i class="icon-folder-open"></i></li> <li><a href="/categories#experiences-ref"> experiences <span>6</span> </a></li> </ul> <ul class="tag_box inline"> <li><i class="icon-tags"></i></li> <li><a href="/tags#c++-ref">c++ <span>3</span></a></li> <li><a href="/tags#swift-ref">swift <span>12</span></a></li> <li><a href="/tags#objective-c++-ref">objective-c++ <span>1</span></a></li> <li><a href="/tags#xcode-ref">xcode <span>3</span></a></li> </ul> <hr> <ul class="pagination"> <li class="prev"><a href="/experiences/2015/12/31/search-for-jekyll" title="Live Lunr Search for Jekyll">&larr; Previous</a></li> <li><a href="/archive">Archive</a></li> <li class="next"><a href="/tips/2016/01/02/talking-through-delegation" title="Talking Through Delegates and Protocols for iOS and OS X">Next &rarr;</a></li> </ul> <hr> <div id="disqus_thread"></div> <script type="text/javascript"> var disqus_developer = 1; var disqus_shortname = 'ikiapps'; (function() { var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true; dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js'; (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq); })(); </script> <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a> </div> </div> <hr/> <footer> <div style="float: left; margin-top: 10px; margin-bottom: 45px;"> &copy; 2019 ikiApps LLC</div> <div style="float: right; margin-top: 10px; margin-bottom: 40px;"><a href="/contact" target="_blank">Contact</a></div> <div style="float: left; margin-top: 10px; margin-bottom: 40px;"><hr/></div> </footer> </div> <script src="/assets/themes/bootstrap/resources/bootstrap/js/bootstrap.min.js"></script> </body> </html>
