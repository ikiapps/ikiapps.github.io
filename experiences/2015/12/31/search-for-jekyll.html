<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width initial-scale=1"> <meta name="author" content="ikiApps LLC, 粋アプリ, d108(सोऽहम्)"> <meta name="description" content="Getting live search working in Jekyll was a real accomplishment but the results displayed still need some improvement. For instance, dates are not showing up..."> <title>Live Lunr Search for Jekyll</title> <link href="/assets/themes/bootstrap/resources/bootstrap/css/bootstrap.min.css" rel="stylesheet"> <!--[if lt IE 9]> <script src="/assets/themes/bootstrap/resources/respond/Respond.min.js"></script> <![endif]--> <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed"> <link href="/rss.xml" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed"> <link rel="stylesheet" href="/css/main.css" type="text/css"> <link rel="canonical" href="/experiences/2015/12/31/search-for-jekyll"> <link rel="shortcut icon" href="/favicon.ico"> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-40712418-2', 'auto'); ga('send', 'pageview'); </script> <script src="/js/jquery-3.2.0.min.js"></script> </head> <body> <nav class="navbar navbar-default" role="navigation"> <div class="container"> <div class="navbar-header"> <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <div class="navbar-image"><a href="/"><img src="/assets/themes/bootstrap/iki-circle-logo.png" width="40"/></a></div> <a class="navbar-brand" href="/">ikiApps</a> </div> <div class="collapse navbar-collapse navbar-ex1-collapse"> <ul class="nav navbar-nav"> <li><a href="/blog/">Blog</a></li> <li><a href="/archive">Archive</a></li> <li><a href="/tags">Tags</a></li> <li><a href="/search/">Search</a></li> </ul> </div> </div> </nav> <div class="container"> <div class="page-header"> <h1>Live Lunr Search for Jekyll </h1> </div> <div class="row post-full"> <div class="col-md-12"> <div class="date"> <span>31 December 2015</span> </div> <div class="content"> <p>Getting live search working in Jekyll was a real accomplishment but the results displayed still need some improvement. For instance, dates are not showing up yet for posts.</p> <p>At first, the search was completely not working. I was getting errors like this when entering a search term.</p><pre><code>Uncaught TypeError: $(...).lunrSearch is not a function
</code></pre><p>After some testing, I discovered this problem was fixable by repositioning my loading of jQuery. I moved the loading of it from the end of the body to the end of the head in my template. I’m maintaining a local copy in <code>/js</code> and loading it with the following statement.</p><pre><code>&lt;script src="/js/jquery-1.11.3.min.js"&gt;&lt;/script&gt;
</code></pre><p>Here is how to live search looks when searching for the term <code>code</code>. I noticed that I could not set the minimum length for search terms lower than three characters.</p> <p><img src="/img/2015-12-31-search-for-jekyll/jekyll-live-search-1.png" alt="Live search in Jekyll is now working." /></p> <p>When I first installed the Ruby gem for <code>jekyll-lunr-js-search</code>, I received a number of errors. I narrowed all of the errors down to a single dependency, <code>therubyracer</code>.</p><pre><code>$ gem install therubyracer
Fetching: therubyracer-0.12.2.gem (100%)
Building native extensions.  This could take a while...
Successfully installed therubyracer-0.12.2
Parsing documentation for therubyracer-0.12.2
unable to convert "xCF" from ASCII-8BIT to UTF-8 for ext/v8/accessor.o, skipping
unable to convert "xCF" from ASCII-8BIT to UTF-8 for ext/v8/array.o, skipping
unable to convert "xCF" from ASCII-8BIT to UTF-8 for ext/v8/backref.o, skipping
unable to convert "xCF" from ASCII-8BIT to UTF-8 for ext/v8/constants.o, skipping
unable to convert "xCF" from ASCII-8BIT to UTF-8 for ext/v8/constraints.o, skipping
unable to convert "xCF" from ASCII-8BIT to UTF-8 for ext/v8/context.o, skipping
unable to convert "xCF" from ASCII-8BIT to UTF-8 for ext/v8/date.o, skipping
unable to convert "xCF" from ASCII-8BIT to UTF-8 for ext/v8/exception.o, skipping
unable to convert "xCF" from ASCII-8BIT to UTF-8 for ext/v8/external.o, skipping
unable to convert "xCF" from ASCII-8BIT to UTF-8 for ext/v8/function.o, skipping
unable to convert "xCF" from ASCII-8BIT to UTF-8 for ext/v8/gc.o, skipping
unable to convert "xCF" from ASCII-8BIT to UTF-8 for ext/v8/handles.o, skipping
unable to convert "xCF" from ASCII-8BIT to UTF-8 for ext/v8/heap.o, skipping
unable to convert "xCF" from ASCII-8BIT to UTF-8 for ext/v8/init.bundle, skipping
unable to convert "xCF" from ASCII-8BIT to UTF-8 for ext/v8/init.o, skipping
unable to convert "xCF" from ASCII-8BIT to UTF-8 for ext/v8/invocation.o, skipping
unable to convert "xCF" from ASCII-8BIT to UTF-8 for ext/v8/locker.o, skipping
unable to convert "xCF" from ASCII-8BIT to UTF-8 for ext/v8/message.o, skipping
unable to convert "xCF" from ASCII-8BIT to UTF-8 for ext/v8/object.o, skipping
unable to convert "xCF" from ASCII-8BIT to UTF-8 for ext/v8/primitive.o, skipping
unable to convert "xCF" from ASCII-8BIT to UTF-8 for ext/v8/rr.o, skipping
unable to convert "xCF" from ASCII-8BIT to UTF-8 for ext/v8/script.o, skipping
unable to convert "xCF" from ASCII-8BIT to UTF-8 for ext/v8/signature.o, skipping
unable to convert "xCF" from ASCII-8BIT to UTF-8 for ext/v8/stack.o, skipping
unable to convert "xCF" from ASCII-8BIT to UTF-8 for ext/v8/string.o, skipping
unable to convert "xCF" from ASCII-8BIT to UTF-8 for ext/v8/template.o, skipping
unable to convert "xCF" from ASCII-8BIT to UTF-8 for ext/v8/trycatch.o, skipping
unable to convert "xCF" from ASCII-8BIT to UTF-8 for ext/v8/v8.o, skipping
unable to convert "xCF" from ASCII-8BIT to UTF-8 for ext/v8/value.o, skipping
unable to convert "xCF" from ASCII-8BIT to UTF-8 for lib/v8/init.bundle, skipping
Installing ri documentation for therubyracer-0.12.2
1 gem installed
</code></pre><p>Curing these conversion errors was accomplished by calling</p><pre><code>$ gem install rdoc
</code></pre><p>I have the search running on the site at <a href="/search">/search</a>. I’ll probably add another post on how the search results can be improved once I solve those problems.</p> </div> <ul class="tag_box inline"> <li><i class="icon-folder-open"></i></li> <li><a href="/categories#experiences-ref"> experiences <span>6</span> </a></li> </ul> <ul class="tag_box inline"> <li><i class="icon-tags"></i></li> <li><a href="/tags#jekyll-ref">jekyll <span>3</span></a></li> <li><a href="/tags#lunr-ref">lunr <span>1</span></a></li> </ul> <hr> <ul class="pagination"> <li class="prev"><a href="/tips/2015/12/30/setting-voice-for-tts-in-ios" title="Changing Voices in Swift for iOS">&larr; Previous</a></li> <li><a href="/archive">Archive</a></li> <li class="next"><a href="/experiences/2016/01/01/cpp-in-xcode-part-1" title="C++ and Swift in Xcode Part 1">Next &rarr;</a></li> </ul> <hr> <div id="disqus_thread"></div> <script type="text/javascript"> var disqus_developer = 1; var disqus_shortname = 'ikiapps'; (function() { var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true; dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js'; (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq); })(); </script> <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a> </div> </div> <hr/> <footer> <div style="float: left; margin-top: 10px; margin-bottom: 45px;"> &copy; 2019 ikiApps LLC</div> <div style="float: right; margin-top: 10px; margin-bottom: 40px;"><a href="/contact" target="_blank">Contact</a></div> <div style="float: left; margin-top: 10px; margin-bottom: 40px;"><hr/></div> </footer> </div> <script src="/assets/themes/bootstrap/resources/bootstrap/js/bootstrap.min.js"></script> </body> </html>
