<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width initial-scale=1"> <meta name="author" content="ikiApps LLC, Á≤ã„Ç¢„Éó„É™, d108(‡§∏‡•ã‡§Ω‡§π‡§Æ‡•ç)"> <meta name="description" content="Delegation is probably not easy to grasp for most. It certainly wasn‚Äôt for me. I want to change that by putting it in a way that can be understood by my read..."> <title>Talking Through Delegates and Protocols for iOS and OS X</title> <link href="/assets/themes/bootstrap/resources/bootstrap/css/bootstrap.min.css" rel="stylesheet"> <!--[if lt IE 9]> <script src="/assets/themes/bootstrap/resources/respond/Respond.min.js"></script> <![endif]--> <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed"> <link href="/rss.xml" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed"> <link rel="stylesheet" href="/css/main.css" type="text/css"> <link rel="canonical" href="/tips/2016/01/02/talking-through-delegation"> <link rel="shortcut icon" href="/favicon.ico"> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-40712418-2', 'auto'); ga('send', 'pageview'); </script> <script src="/js/jquery-3.2.0.min.js"></script> </head> <body> <nav class="navbar navbar-default" role="navigation"> <div class="container"> <div class="navbar-header"> <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <div class="navbar-image"><a href="/"><img src="/assets/themes/bootstrap/iki-circle-logo.png" width="40"/></a></div> <a class="navbar-brand" href="/">ikiApps</a> </div> <div class="collapse navbar-collapse navbar-ex1-collapse"> <ul class="nav navbar-nav"> <li><a href="/blog/">Blog</a></li> <li><a href="/archive">Archive</a></li> <li><a href="/tags">Tags</a></li> <li><a href="/search/">Search</a></li> </ul> </div> </div> </nav> <div class="container"> <div class="page-header"> <h1>Talking Through Delegates and Protocols for iOS and OS X </h1> </div> <div class="row post-full"> <div class="col-md-12"> <div class="date"> <span>02 January 2016</span> </div> <div class="content"> <p>Delegation is probably not easy to grasp for most. It certainly wasn‚Äôt for me. I want to change that by putting it in a way that can be understood by my readers and students. Of all things, delegation is one of the most characteristic patterns found throughout iOS and OS X development. I‚Äôd argue that it is one of the cornerstones of apps for the Apple ecosystem. It‚Äôs a rather perfect mechanism for updating the UI after background operations.</p> <p>It can even serve to facilitate UI updates for alternate paradigms such as MVVM. See <a href="/experiences/2016/01/15/mvvm-in-swift-with-reactivecocoa4.html">MVVM in Swift with ReactiveCocoa 4</a>.</p> <h2 id="delegate-or-not">Delegate or not?</h2> <p>A delegate is someone that performs actions on the behalf of another. If I delegate work to you, the work will be performed by you on my behalf, if you agree. In software terms, our agreement is outlined in a protocol. When you conform to my protocol, that is sufficient for you to be accepted as my delegate.</p> <h2 id="reasoning-about-delegates">Reasoning about delegates</h2> <p>Getting going with delegation can be achieved by answering a few key questions.</p> <ul> <li>Who is the delegate?</li> <li>Where to place the protocol?</li> <li>Where to implement the delegate methods?</li> </ul> <h2 id="who-is-the-delegate">Who is the delegate?</h2> <p>This is the same as asking ‚ÄúWho needs to do something?‚Äù or ‚ÄúWho needs to perform the action?‚Äù</p> <p>The answer is, whoever is performing the action will be the <strong>delegate.</strong></p> <p>Once you know who the delegate is, it‚Äôs easier to determine where to place the delegate protocol and where to create the delegate property.</p> <p>The delegate protocol, in general, lives with the delegate property since it is someone else who will be the delegate. It is <em>the other class</em> that is going to conform to the protocol.</p> <h2 id="where-to-place-the-protocol">Where to place the protocol?</h2> <p>Place the protocol with the delegate property. The protocol goes with the property. For a more memorable form, that can be boiled down to <strong>protocol-with-property.</strong></p> <figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span></span><span class="kd">protocol</span> <span class="nc">ADelegate</span><span class="p">:</span> <span class="kd">class</span> <span class="p">{</span>
    <span class="kd">func</span> <span class="nf">firstDelegateMethod</span><span class="p">()</span> 
    <span class="kd">func</span> <span class="nf">secondDelegateMethod</span><span class="p">()</span> 
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">AClass</span> <span class="p">{</span>
    <span class="kr">weak</span> <span class="kd">var</span> <span class="nv">delegate</span><span class="p">:</span> <span class="n">ADelegate</span><span class="p">?</span>	
<span class="p">}</span></code></pre></figure> <h2 id="where-to-implement-the-delegate-methods">Where to implement the delegate methods?</h2> <p>Implement the methods where the action is, where the work needs to be done. That‚Äôs a <strong>delegate = self</strong> situation. That‚Äôs easy to remember because that‚Äôs one of the most common delegate assignments in iOS and OS X programming.</p> <p>Self can only be a delegate when it conforms to the proper protocol. The protocol lives somewhere else. The protocol is the list of functions that the delegate needs to implement. If you are implementing delegate methods in the class that contains the protocol, then you have probably confused upside with down, an easy mistake to make after going through the delegation spin cycle. üòú</p> <figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span></span><span class="kd">class</span> <span class="nc">SomeOtherClass</span><span class="p">:</span> <span class="n">ImaDelegate</span> <span class="p">{</span>
    <span class="kd">init</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nv">anObject</span> <span class="p">=</span> <span class="n">AClass</span><span class="p">()</span>
        <span class="n">anObject</span><span class="p">.</span><span class="n">delegate</span> <span class="p">=</span> <span class="kc">self</span>
    <span class="p">}</span>

    <span class="c1">// </span><span class="cs">MARK:</span><span class="c1"> ImaDelegate Methods</span>
    
    <span class="kd">func</span> <span class="nf">firstDelegateMethod</span><span class="p">()</span> <span class="p">{</span>
    <span class="p">}</span>

    <span class="c1">// and so on...</span>
<span class="p">}</span></code></pre></figure> <p>We use weak properties in Swift for class delegates to prevent retain cycles from occurring.</p> <h2 id="delegate-protocols">Delegate protocols</h2> <p>Does a delegate ever exist without a protocol? In general, no.</p> <p>A delegate has a type that matches the protocol for the delegate.</p> <p>To test your understanding, answer what is the difference between a delegate and a protocol?</p> <h3 id="protocol-naming">Protocol naming</h3> <p>OtherViewControllerDelegate is a rather generic name though perfectly appropriate.</p> <p>OtherViewControllerDataUpdating or OtherViewControllerDataUpdatable would be much more specific and readily identifiable as being something than an ordinary class.</p> <h2 id="when-to-use-delegation">When to use delegation</h2> <p>Anything event-based can benefit from delegation such as making UI updates after asynchronous operations.</p> <p>A converse example is that delegation would equally apply to responding to a UI event such as a button press. The view containing the button that receives the event can than delegate actions to another class that contains the code needed to handle the event. Because of delegation, a separation of responsibilities can be maintained (this is what MVC is about).</p> <h2 id="conclusion">Conclusion</h2> <p>Using delegation is vital to giving your app the abilities it needs to create an effective user experience.</p> <p>It‚Äôs a slightly more formal approach to handling an event than by other means such as by observation or using a callback due to requiring a protocol.</p> <p>However, protocols confer the benefit of compile-time checking and serve as an additional source of documentation when named appropriately.</p> </div> <ul class="tag_box inline"> <li><i class="icon-folder-open"></i></li> <li><a href="/categories#tips-ref"> tips <span>10</span> </a></li> </ul> <ul class="tag_box inline"> <li><i class="icon-tags"></i></li> <li><a href="/tags#ios-ref">ios <span>9</span></a></li> <li><a href="/tags#osx-ref">osx <span>8</span></a></li> <li><a href="/tags#swift-ref">swift <span>12</span></a></li> <li><a href="/tags#delegation-ref">delegation <span>1</span></a></li> </ul> <hr> <ul class="pagination"> <li class="prev"><a href="/experiences/2016/01/01/cpp-in-xcode-part-1" title="C++ and Swift in Xcode Part 1">&larr; Previous</a></li> <li><a href="/archive">Archive</a></li> <li class="next"><a href="/experiences/2016/01/03/promises-in-ios" title="My First Peek at Promises in Swift on iOS and OS X">Next &rarr;</a></li> </ul> <hr> <div id="disqus_thread"></div> <script type="text/javascript"> var disqus_developer = 1; var disqus_shortname = 'ikiapps'; (function() { var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true; dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js'; (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq); })(); </script> <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a> </div> </div> <hr/> <footer> <div style="float: left; margin-top: 10px; margin-bottom: 45px;"> &copy; 2019 ikiApps LLC</div> <div style="float: right; margin-top: 10px; margin-bottom: 40px;"><a href="/contact" target="_blank">Contact</a></div> <div style="float: left; margin-top: 10px; margin-bottom: 40px;"><hr/></div> </footer> </div> <script src="/assets/themes/bootstrap/resources/bootstrap/js/bootstrap.min.js"></script> </body> </html>
